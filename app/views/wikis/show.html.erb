<!--
<h1><%= @wiki.title %></h1>
<br />
<small> <%= @wiki.user.email%> created this <%= time_ago_in_words(@wiki.created_at) %> </small>
<p></p>
<% if @wiki.private? %>
    <small>Private</small>
<% else %>
    <small>Public</small>
<% end %>
<% if policy(Wiki.new).edit? %>
    <%= link_to "Edit", edit_wiki_path(@wiki), class: 'btn btn-success' %>
<% end %>
<hr>

<div class="row">
    <div class="col-md-8">
        <p><%= markdown(@wiki.body) %></p>
        <% if policy(Wiki.new).destroy? %>
            <%= link_to "Delete wiki", @wiki, method: :delete, class: 'btn btn-danger', data: {confirm: "Are you sure you want to delete this wiki?"} %>
        <% end %>
    </div>
    <div class="col-md-4">
        <%= link_to "Edit", edit_wiki_path(@wiki), class: 'btn btn-success' %>
        <%= link_to "Delete Post", @wiki, method: :delete, class: 'btn btn-danger', data: {confirm: 'Are you sure you want to delete this wiki?'} %>
        <% if Collaborator.exists?(wiki_id: @wiki) %>
                <%= render partial: 'collaborators/form' %>
        <% end %>
    </div>
</div>
#############################
<h1><%= @wiki.title %></h1>

<div class="row">
    <div class="col-md-8">
        <p><%= markdown(@wiki.body) %></p>
        <p>Created by <%= @wiki.user.email %></p>
        <p>Collaborators:
            <% unless @wiki.collaborators.empty? %>
                <% @wiki.collaborators.each do |collaborator| %>
                    <p><%= collaborator.email %></p>
                <% end %>
            <% end %></p>
    </div>
    <div class="col-md-4">
        <% if user_is_authorized_to_update? %>
            <%= link_to "Edit", edit_wiki_path(@wiki), class: 'btn btn-success' %>
        <% end %>
        <%if user_is_authorized_to_delete? %>
            <%= link_to "Delete Wiki", @wiki, method: :delete, class: 'btn btn-danger', data: {confirm: 'Are you sure you want to delete this wiki?'} %>
        <% end %>
    </div>
</div>
-->
<h1><%= @wiki.title %></h1>

<div class="row">
  <div class="col-md-8">
    <h4><% if @wiki.user.premium? %>
        <span class='glyphicon glyphicon-star' style="color: #fc0;"></span>
      <% end %>
      <% if @wiki.user.admin? %>
        <span class='glyphicon glyphicon-cog' style="color: #c00;"></span>
      <% end %>
      <%= @wiki.user.email %> |
      <% if @wiki.public %>Public<% else %>Private<% end %>
      <% if @wiki.user == current_user %> - Owner<% end %></h4>
      <% if !(Collaborator.where(wiki: @wiki).empty?) %>
        <p><strong>Collaborators:</strong>
          <% Collaborator.where(wiki: @wiki).each do |collab| %>
            <%= User.where(id: collab.user_id).pluck(:email) %>
          <% end %>
        </p>
      <% end %>
      <hr/>
      <%= markdown(@wiki.body) %>
  </div>
  <div class="col-md-4">
    <% if policy(@wiki).update? %>
      <%= link_to "Edit", edit_wiki_path(@wiki), class: 'btn btn-success' %>
      <%= link_to "Delete Wiki", @wiki, method: :delete, class: 'btn btn-danger',
        data: {confirm: 'Are you sure you want to delete this Wiki?'} %>
    <% end %>
  </div>
</div>